{"config":{"people":[{"name":"Dominique Saint-Pierre","idul":"dosap6","matricule":"111134516"},{"name":"Adam Kitoko","idul":"adkim1","matricule":"536868700"},{"name":"Pengdwind√© Alex Auguste Ouedraogo","idul":"paoue99","matricule":"111250058"}],"team_number":"20"},"tp_object":{"q3":{"client_file":"IiIiXApHTE8tMjAwMCBUcmF2YWlsIHByYXRpcXVlIDQgLSBDbGllbnQKTm9tcyBldCBudW3DqXJvcyDDqXR1ZGlhbnRzOgotIERvbWluaXF1ZSBTYWludC1QaWVycmUgMTExIDEzNCA1MTYKLSBBZGFtIEtpdG9rbyA1MzYgODY4IDcwMAotIFBlbmdkd2luZMOpIEFsZXggQXVndXN0ZSBPdWVkcmFvZ28gMTExIDI1MCAwNTgKIiIiCgppbXBvcnQgYXJncGFyc2UKaW1wb3J0IGdldHBhc3MKaW1wb3J0IGpzb24KaW1wb3J0IHNvY2tldAppbXBvcnQgc3lzCmltcG9ydCByZQoKaW1wb3J0IGdsb3NvY2tldAppbXBvcnQgZ2xvdXRpbHMKCgpjbGFzcyBDbGllbnQ6CiAgICAiIiJDbGllbnQgcG91ciBsZSBzZXJ2ZXVyIG1haWwgQGdsbzIwMDAuY2EuIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGRlc3RpbmF0aW9uOiBzdHIpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgUHLDqXBhcmUgZXQgY29ubmVjdGUgbGUgc29ja2V0IGR1IGNsaWVudCBgX3NvY2tldGAuCgogICAgICAgIFByw6lwYXJlIHVuIGF0dHJpYnV0IGBfdXNlcm5hbWVgIHBvdXIgc3RvY2tlciBsZSBub20gZCd1dGlsaXNhdGV1cgogICAgICAgIGNvdXJhbnQuIExhaXNzw6kgdmlkZSBxdWFuZCBsJ3V0aWxpc2F0ZXVyIG4nZXN0IHBhcyBjb25uZWN0w6kuCiAgICAgICAgIiIiCiAgICAgICAgIyBQcsOpcGFyYXRpb24gZHUgc29ja2V0CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLl9zb2NrZXQgPSBzb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrZXQuU09DS19TVFJFQU0pCiAgICAgICAgICAgIHNlbGYuX3NvY2tldC5jb25uZWN0KChkZXN0aW5hdGlvbiwgZ2xvdXRpbHMuQVBQX1BPUlQpKQogICAgICAgIGV4Y2VwdCBnbG9zb2NrZXQuR0xPU29ja2V0RXJyb3IgYXMgZToKICAgICAgICAgICAgc3lzLmV4aXQoLTEpCiAgICAgICAgCiAgICAgICAgI1Byw6lwYXJhdGlvbiBkZXMgbWVtYnJlcwogICAgICAgIHNlbGYuX3VzZXJuYW1lID0gTm9uZQoKICAgIGRlZiBfcmVnaXN0ZXIoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICBEZW1hbmRlIHVuIG5vbSBkJ3V0aWxpc2F0ZXVyIGV0IHVuIG1vdCBkZSBwYXNzZSBldCBsZXMgdHJhbnNtZXQgYXUKICAgICAgICBzZXJ2ZXVyIGF2ZWMgbCdlbnTDqnRlIGBBVVRIX1JFR0lTVEVSYC4KCiAgICAgICAgU2kgbGEgY3LDqWF0aW9uIGR1IGNvbXB0ZSBzJ2VzdCBlZmZlY3R1w6llIGF2ZWMgc3VjY8OocywgbCdhdHRyaWJ1dAogICAgICAgIGBfdXNlcm5hbWVgIGVzdCBtaXMgw6Agam91ciwgc2lub24gbCdlcnJldXIgZXN0IGFmZmljaMOpZS4KICAgICAgICAiIiIKICAgICAgICB1c2VyTm9tID0gaW5wdXQoIkVudHJleiB1biBub20gZCd1dGlsaXNhdGV1cjoiKQogICAgICAgIG1vdERlUGFzc2UgPSBnZXRwYXNzLmdldHBhc3MoIkVudHJleiB1biBtb3QgZGUgcGFzc2U6IikKICAgICAgICBtZXNzYWdlQXV0aCA9IGdsb3V0aWxzLkdsb01lc3NhZ2UoaGVhZGVyPWdsb3V0aWxzLkhlYWRlcnMuQVVUSF9SRUdJU1RFUiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZD0gZ2xvdXRpbHMuQXV0aFBheWxvYWQodXNlcm5hbWU9dXNlck5vbSwgcGFzc3dvcmQ9bW90RGVQYXNzZSkpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBnbG9zb2NrZXQuc2VuZF9tZXNnKHNlbGYuX3NvY2tldCwganNvbi5kdW1wcyhtZXNzYWdlQXV0aCkpCiAgICAgICAgZXhjZXB0IGdsb3NvY2tldC5HTE9Tb2NrZXRFcnJvcjoKICAgICAgICAgICAgcHJpbnQoIkVycmV1ciwgbGEgY29ubmV4aW9uIGF2ZWMgbGUgc2VydmV1ciBlc3Qgcm9tcHVlIToiKQogICAgICAgICAgICBzZWxmLl9xdWl0KCkKCiAgICAgICAgIyBSZWNldm9pciBsYSByw6lwb25zZSBkdSBzZXJ2ZXVyCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXBvbnNlID0ganNvbi5sb2FkcyhnbG9zb2NrZXQucmVjdl9tZXNnKHNlbGYuX3NvY2tldCkpCiAgICAgICAgZXhjZXB0IGdsb3NvY2tldC5HTE9Tb2NrZXRFcnJvcjoKICAgICAgICAgICAgcHJpbnQoIkVycmV1ciwgbGEgY29ubmV4aW9uIGF2ZWMgbGUgc2VydmV1ciBlc3Qgcm9tcHVlIToiKQogICAgICAgICAgICBzZWxmLl9xdWl0KCkKCiAgICAgICAgbWF0Y2ggcmVwb25zZToKICAgICAgICAgICAgY2FzZSB7ImhlYWRlciI6IGdsb3V0aWxzLkhlYWRlcnMuT0t9OgogICAgICAgICAgICAgICAgc2VsZi5fdXNlcm5hbWUgPSB1c2VyTm9tCiAgICAgICAgICAgIGNhc2UgeyJoZWFkZXIiOiBnbG91dGlscy5IZWFkZXJzLkVSUk9SfToKICAgICAgICAgICAgICAgIGVyclBheWxvYWQgPSByZXBvbnNlWydwYXlsb2FkJ10KICAgICAgICAgICAgICAgIHByaW50KGVyclBheWxvYWRbJ2Vycm9yX21lc3NhZ2UnXSkKCiAgICBkZWYgX2xvZ2luKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgRGVtYW5kZSB1biBub20gZCd1dGlsaXNhdGV1ciBldCB1biBtb3QgZGUgcGFzc2UgZXQgbGVzIHRyYW5zbWV0IGF1CiAgICAgICAgc2VydmV1ciBhdmVjIGwnZW50w6p0ZSBgQVVUSF9MT0dJTmAuCgogICAgICAgIFNpIGxhIGNvbm5leGlvbiBlc3QgZWZmZWN0dcOpZSBhdmVjIHN1Y2PDqHMsIGwnYXR0cmlidXQgYF91c2VybmFtZWAKICAgICAgICBlc3QgbWlzIMOgIGpvdXIsIHNpbm9uIGwnZXJyZXVyIGVzdCBhZmZpY2jDqWUuCiAgICAgICAgIiIiCgogICAgICAgIHByaW50KCJDb25uZXhpb24gw6AgdW4gY29tcHRlIGV4aXN0YW50OiIpCiAgICAgICAgbm9tRFV0aWxpc2F0ZXVyID0gaW5wdXQoIkVudHJleiB1biBub20gZCd1dGlsaXNhdGV1cjoiKQogICAgICAgIG1vdERlUGFzc2UgPSBnZXRwYXNzLmdldHBhc3MoIkVudHJleiB1biBtb3QgZGUgcGFzc2U6IikKCiAgICAgICAgIyBFbnZveWVyIGwnZW50w6p0ZSBBVVRIX0xPR0lOIGF1IHNlcnZldXIgYXZlYyBsZXMgaW5mb3JtYXRpb25zIGRlIGNvbm5leGlvbgogICAgICAgIGF1dGhMb2dNZXNzYWdlID0gZ2xvdXRpbHMuR2xvTWVzc2FnZSgKICAgICAgICAgICAgaGVhZGVyPWdsb3V0aWxzLkhlYWRlcnMuQVVUSF9MT0dJTiwKICAgICAgICAgICAgcGF5bG9hZD1nbG91dGlscy5BdXRoUGF5bG9hZCh1c2VybmFtZT1ub21EVXRpbGlzYXRldXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ9bW90RGVQYXNzZSkKICAgICAgICApCiAgICAgICAgdHJ5OgogICAgICAgICAgICBnbG9zb2NrZXQuc2VuZF9tZXNnKHNlbGYuX3NvY2tldCwganNvbi5kdW1wcyhhdXRoTG9nTWVzc2FnZSkpCiAgICAgICAgZXhjZXB0IGdsb3NvY2tldC5HTE9Tb2NrZXRFcnJvcjoKICAgICAgICAgICAgcHJpbnQoIkVycmV1ciwgbGEgY29ubmV4aW9uIGF2ZWMgbGUgc2VydmV1ciBlc3Qgcm9tcHVlIToiKQogICAgICAgICAgICBzZWxmLl9xdWl0KCkKCiAgICAgICAgIyBSZWNldm9pciBsYSByw6lwb25zZSBkdSBzZXJ2ZXVyCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXBvbnNlID0ganNvbi5sb2FkcyhnbG9zb2NrZXQucmVjdl9tZXNnKHNlbGYuX3NvY2tldCkpCiAgICAgICAgZXhjZXB0IGdsb3NvY2tldC5HTE9Tb2NrZXRFcnJvcjoKICAgICAgICAgICAgcHJpbnQoIkVycmV1ciwgbGEgY29ubmV4aW9uIGF2ZWMgbGUgc2VydmV1ciBlc3Qgcm9tcHVlIToiKQogICAgICAgICAgICBzZWxmLl9xdWl0KCkKCiAgICAgICAgbWF0Y2ggcmVwb25zZToKICAgICAgICAgICAgY2FzZSB7ImhlYWRlciI6IGdsb3V0aWxzLkhlYWRlcnMuT0t9OgogICAgICAgICAgICAgICAgc2VsZi5fdXNlcm5hbWUgPSBub21EVXRpbGlzYXRldXIKICAgICAgICAgICAgY2FzZSB7ImhlYWRlciI6IGdsb3V0aWxzLkhlYWRlcnMuRVJST1J9OgogICAgICAgICAgICAgICAgcHJpbnQocmVwb25zZVsncGF5bG9hZCddWydlcnJvcl9tZXNzYWdlJ10pCgogICAgZGVmIF9xdWl0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgUHLDqXZpZW5zIGxlIHNlcnZldXIgZGUgbGEgZMOpY29ubmV4aW9uIGF2ZWMgbCdlbnTDqnRlIGBCWUVgIGV0IGZlcm1lIGxlCiAgICAgICAgc29ja2V0IGR1IGNsaWVudC4KICAgICAgICAiIiIKICAgICAgICAjIEVudm95ZXIgbCdlbnTDqnRlIEJZRSBhdSBzZXJ2ZXVyCiAgICAgICAgdHJ5OgogICAgICAgICAgICBnbG9zb2NrZXQuc2VuZF9tZXNnKHNlbGYuX3NvY2tldCwganNvbi5kdW1wcyhnbG91dGlscy5HbG9NZXNzYWdlKAogICAgICAgICAgICAgICAgaGVhZGVyPWdsb3V0aWxzLkhlYWRlcnMuQllFLAogICAgICAgICAgICAgICAgcGF5bG9hZD1Ob25lCiAgICAgICAgICAgICkpKQogICAgICAgIGV4Y2VwdCBnbG9zb2NrZXQuR0xPU29ja2V0RXJyb3I6CiAgICAgICAgICAgIHByaW50KCJFcnJldXIsIGRlIGNvbW11bmljYXRpb24gYXZlYyBsZSBzZXJ2ZXVyIVxuIikKICAgICAgICAgICAgc2VsZi5fc29ja2V0LmNsb3NlKCkKCiAgICAgICAgIyBGZXJtZXIgbGUgc29ja2V0IGR1IGNsaWVudAogICAgICAgIHNlbGYuX3NvY2tldC5jbG9zZSgpCgogICAgZGVmIF9yZWFkX2VtYWlsKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgRGVtYW5kZSBhdSBzZXJ2ZXVyIGxhIGxpc3RlIGRlIHNlcyBjb3VycmllbHMgYXZlYyBsJ2VudMOqdGUKICAgICAgICBgSU5CT1hfUkVBRElOR19SRVFVRVNUYC4KCiAgICAgICAgQWZmaWNoZSBsYSBsaXN0ZSBkZXMgY291cnJpZWxzIHB1aXMgdHJhbnNtZXQgbGUgY2hvaXggZGUgbCd1dGlsaXNhdGV1cgogICAgICAgIGF2ZWMgbCdlbnTDqnRlIGBJTkJPWF9SRUFESU5HX0NIT0lDRWAuCgogICAgICAgIEFmZmljaGUgbGUgY291cnJpZWwgw6AgbCdhaWRlIGR1IGdhYmFyaXQgYEVNQUlMX0RJU1BMQVlgLgoKICAgICAgICBTJ2lsIG4neSBhIHBhcyBkZSBjb3VycmllbCDDoCBsaXJlLCBsJ3V0aWxpc2F0ZXVyIGVzdCBhdmVydGkgYXZhbnQgZGUKICAgICAgICByZXRvdXJuZXIgYXUgbWVudSBwcmluY2lwYWwuCiAgICAgICAgIiIiCiAgICAgICAgIyBEZW1hbmRlciBsYSBsaXN0ZSBkZXMgY291cnJpZWxzIGF1IHNlcnZldXIKICAgICAgICBkZW1hbmRlRW1haWxMaXN0ID0gZ2xvdXRpbHMuR2xvTWVzc2FnZSgKICAgICAgICAgICAgaGVhZGVyPWdsb3V0aWxzLkhlYWRlcnMuSU5CT1hfUkVBRElOR19SRVFVRVNUCiAgICAgICAgKQogICAgICAgIHRyeToKICAgICAgICAgICAgZ2xvc29ja2V0LnNlbmRfbWVzZyhzZWxmLl9zb2NrZXQsIGpzb24uZHVtcHMoZGVtYW5kZUVtYWlsTGlzdCkpCiAgICAgICAgZXhjZXB0IGdsb3NvY2tldC5HTE9Tb2NrZXRFcnJvcjoKICAgICAgICAgICAgcHJpbnQoIkVycmV1ciwgZGUgY29tbXVuaWNhdGlvbiBhdmVjIGxlIHNlcnZldXIhXG5WZXVpbGxleiB2b3VzIHJlY29ubmVjdGVyOiIpCiAgICAgICAgICAgIHNlbGYuX2xvZ291dCgpCgogICAgICAgICMgUmVjZXZvaXIgbGEgcsOpcG9uc2UgZHUgc2VydmV1cgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVwb25zZUVtYWlsTGlzdCA9IGpzb24ubG9hZHMoZ2xvc29ja2V0LnJlY3ZfbWVzZyhzZWxmLl9zb2NrZXQpKQogICAgICAgIGV4Y2VwdCBnbG9zb2NrZXQuR0xPU29ja2V0RXJyb3I6CiAgICAgICAgICAgIHByaW50KCJFcnJldXIsIGRlIGNvbW11bmljYXRpb24gYXZlYyBsZSBzZXJ2ZXVyIVxuVmV1aWxsZXogdm91cyByZWNvbm5lY3RlcjoiKQogICAgICAgICAgICBzZWxmLl9sb2dvdXQoKQoKICAgICAgICBlbWFpbExpc3Q6IGxpc3QgPSByZXBvbnNlRW1haWxMaXN0WydwYXlsb2FkJ11bJ2VtYWlsX2xpc3QnXQogICAgICAgIGlmIGxlbihlbWFpbExpc3QpIDwgMToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZm9yIGNvdXJyaWVsIGluIGVtYWlsTGlzdDoKICAgICAgICAgICAgICAgIHByaW50KGNvdXJyaWVsKQogICAgICAgICAgICAjIERlbWFuZGVyIGxlIGNob2l4IGRlIGwndXRpbGlzYXRldXIKICAgICAgICAgICAgY2hvaXhDb3VycmllbCA9IGlucHV0KCJFbnRyZXogdm90cmUgY2hvaXggWzEtIiArIHN0cihsZW4oZW1haWxMaXN0KSkgKyAiXToiKQogICAgICAgICAgICBpZiBub3QgKChyZS5zZWFyY2gociJbMC05XSsiLCBjaG9peENvdXJyaWVsKSBpcyBub3QgTm9uZSkgYW5kIChub3QgaW50KGNob2l4Q291cnJpZWwpPmxlbihlbWFpbExpc3QpKSk6CiAgICAgICAgICAgICAgICBwcmludCgiRXJyZXVyLCBjaG9peCBkZSBjb3VycmllbCBpbnZhbGlkZSFcbiBWZXVpbGxleiByZWNvbW1lbmNlci4iKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgI0Vudm9pIGR1IG51bcOpcm8gZHUgY291cnJpZWwgY2hvaXNpCiAgICAgICAgICAgICAgICBlbnZvaUNob2l4ID0gZ2xvdXRpbHMuR2xvTWVzc2FnZSgKICAgICAgICAgICAgICAgICAgICBoZWFkZXI9Z2xvdXRpbHMuSGVhZGVycy5JTkJPWF9SRUFESU5HX0NIT0lDRSwKICAgICAgICAgICAgICAgICAgICBwYXlsb2FkPWdsb3V0aWxzLkVtYWlsQ2hvaWNlUGF5bG9hZChjaG9pY2U9Y2hvaXhDb3VycmllbCkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBnbG9zb2NrZXQuc2VuZF9tZXNnKHNlbGYuX3NvY2tldCwganNvbi5kdW1wcyhlbnZvaUNob2l4KSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBnbG9zb2NrZXQuR0xPU29ja2V0RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkVycmV1ciwgZGUgY29tbXVuaWNhdGlvbiBhdmVjIGxlIHNlcnZldXIhXG5WZXVpbGxleiB2b3VzIHJlY29ubmVjdGVyOiIpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbG9nb3V0KCkKCiAgICAgICAgICAgICAgICAjUmVjZXB0aW9uIGR1IGNvdXJyaWVsIGNob2lzaQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHJlY2VwdGlvbkVtYWlsID0ganNvbi5sb2FkcyhnbG9zb2NrZXQucmVjdl9tZXNnKHNlbGYuX3NvY2tldCkpCiAgICAgICAgICAgICAgICBleGNlcHQgZ2xvc29ja2V0LkdMT1NvY2tldEVycm9yOgogICAgICAgICAgICAgICAgICAgIHByaW50KCJFcnJldXIsIGRlIGNvbW11bmljYXRpb24gYXZlYyBsZSBzZXJ2ZXVyIVxuVmV1aWxsZXogdm91cyByZWNvbm5lY3RlcjoiKQogICAgICAgICAgICAgICAgICAgIHNlbGYuX2xvZ291dCgpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHByaW50KGdsb3V0aWxzLkVNQUlMX0RJU1BMQVkuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIHNlbmRlcj1yZWNlcHRpb25FbWFpbFsicGF5bG9hZCJdWydzZW5kZXInXSwKICAgICAgICAgICAgICAgICAgICB0bz1yZWNlcHRpb25FbWFpbFsicGF5bG9hZCJdWydkZXN0aW5hdGlvbiddLAogICAgICAgICAgICAgICAgICAgIHN1YmplY3Q9cmVjZXB0aW9uRW1haWxbInBheWxvYWQiXVsnc3ViamVjdCddLAogICAgICAgICAgICAgICAgICAgIGRhdGU9cmVjZXB0aW9uRW1haWxbInBheWxvYWQiXVsnZGF0ZSddLAogICAgICAgICAgICAgICAgICAgIGJvZHk9cmVjZXB0aW9uRW1haWxbInBheWxvYWQiXVsnY29udGVudCddKSkKCiAgICBkZWYgX3NlbmRfZW1haWwoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICBEZW1hbmRlIMOgIGwndXRpbGlzYXRldXIgcmVzcGVjdGl2ZW1lbnQ6CiAgICAgICAgLSBsJ2FkcmVzc2UgZW1haWwgZHUgZGVzdGluYXRhaXJlLAogICAgICAgIC0gbGUgc3VqZXQgZHUgbWVzc2FnZSwKICAgICAgICAtIGxlIGNvcnBzIGR1IG1lc3NhZ2UuCgogICAgICAgIExhIHNhaXNpZSBkdSBjb3JwcyBzZSB0ZXJtaW5lIHBhciB1biBwb2ludCBzZXVsIHN1ciB1bmUgbGlnbmUuCgogICAgICAgIFRyYW5zbWV0IGNlcyBpbmZvcm1hdGlvbnMgYXZlYyBsJ2VudMOqdGUgYEVNQUlMX1NFTkRJTkdgLgogICAgICAgICIiIgogICAgICAgICNSw6ljdXDDqXJhdGlvbiBkdSBjb250ZW51IGR1IGNvdXJyaWVsLgogICAgICAgIGRlc3RFbWFpbCA9IGlucHV0KCJFbnRyZXogbCdhZHJlc3NlIGR1IGRlc3RpbmF0YWlyZToiKQogICAgICAgIHN1akVtYWlsID0gaW5wdXQoIkVudHJleiBsZSBzdWpldDoiKQogICAgICAgICMgQm91Y2xlIGQnZW50csOpZSBkdSBjb250ZW51IGR1IGVtYWlsLgogICAgICAgIHByaW50KCJFbnRyZXogbGUgY29udGVudSBkdSBjb3VycmllbCwgdGVybWluZXogbGEgc2Fpc2llIGF2ZWMgdW4gJy4nIHNldWwgc3VyIHVuZSBsaWduZToiKQogICAgICAgIG1lc3NhZ2VFbWFpbCA9ICIiCiAgICAgICAgc2Fpc2llVGVybSA9IEZhbHNlCiAgICAgICAgd2hpbGUgKG5vdCBzYWlzaWVUZXJtKToKICAgICAgICAgICAgdGV4dFNhaXNpID0gaW5wdXQoKQogICAgICAgICAgICBpZiAodGV4dFNhaXNpID09ICcuJyk6CiAgICAgICAgICAgICAgICBzYWlzaWVUZXJtID0gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbWVzc2FnZUVtYWlsICs9IHRleHRTYWlzaQogICAgICAgICAgICAgICAgbWVzc2FnZUVtYWlsICs9ICdcbicKCiAgICAgICAgIyBQcsOpcGFyYXRpb24gZHUgY291cnJpZWwuCiAgICAgICAgZW1haWxDb250ZW51ID0gZ2xvdXRpbHMuRW1haWxDb250ZW50UGF5bG9hZCgKICAgICAgICAgICAgc2VuZGVyPXNlbGYuX3VzZXJuYW1lICsgJ0AnICsgZ2xvdXRpbHMuU0VSVkVSX0RPTUFJTiwKICAgICAgICAgICAgZGVzdGluYXRpb249ZGVzdEVtYWlsLAogICAgICAgICAgICBzdWJqZWN0PXN1akVtYWlsLAogICAgICAgICAgICBkYXRlPWdsb3V0aWxzLmdldF9jdXJyZW50X3V0Y190aW1lKCksCiAgICAgICAgICAgIGNvbnRlbnQ9bWVzc2FnZUVtYWlsKQogICAgICAgICNFbnZvaSBkZSBjb3VycmllbAogICAgICAgIGVtYWlsU2VudCA9IGdsb3V0aWxzLkdsb01lc3NhZ2UoCiAgICAgICAgICAgIGhlYWRlcj1nbG91dGlscy5IZWFkZXJzLkVNQUlMX1NFTkRJTkcsCiAgICAgICAgICAgIHBheWxvYWQ9ZW1haWxDb250ZW51KQogICAgICAgIHRyeToKICAgICAgICAgICAgZ2xvc29ja2V0LnNlbmRfbWVzZyhzZWxmLl9zb2NrZXQsIGpzb24uZHVtcHMoZW1haWxTZW50KSkKICAgICAgICBleGNlcHQgZ2xvc29ja2V0LkdMT1NvY2tldEVycm9yOgogICAgICAgICAgICBwcmludCgiRXJyZXVyLCBkZSBjb21tdW5pY2F0aW9uIGF2ZWMgbGUgc2VydmV1ciFcblZldWlsbGV6IHZvdXMgcmVjb25uZWN0ZXI6IikKICAgICAgICAgICAgc2VsZi5fbG9nb3V0KCkKCiAgICAgICAgIyBDb25maXJtYXRpb24gZGUgbCdlbnZvaS4KICAgICAgICB0cnk6CiAgICAgICAgICAgIHJlcG9uc2VTZXJ2ZXVyID0ganNvbi5sb2FkcyhnbG9zb2NrZXQucmVjdl9tZXNnKHNlbGYuX3NvY2tldCkpCiAgICAgICAgZXhjZXB0IGdsb3NvY2tldC5HTE9Tb2NrZXRFcnJvcjoKICAgICAgICAgICAgcHJpbnQoIkVycmV1ciwgZGUgY29tbXVuaWNhdGlvbiBhdmVjIGxlIHNlcnZldXIhXG5WZXVpbGxleiB2b3VzIHJlY29ubmVjdGVyOiIpCiAgICAgICAgICAgIHNlbGYuX2xvZ291dCgpCiAgICAgICAgCiAgICAgICAgbWF0Y2ggcmVwb25zZVNlcnZldXI6CiAgICAgICAgICAgIGNhc2UgeyJoZWFkZXIiOiBnbG91dGlscy5IZWFkZXJzLk9LfToKICAgICAgICAgICAgICAgIHByaW50KCJDb3VycmllbCBlbnZvecOpIGF2ZWMgc3VjY8OocyIpCiAgICAgICAgICAgIGNhc2UgeyJoZWFkZXIiOiBnbG91dGlscy5IZWFkZXJzLkVSUk9SfToKICAgICAgICAgICAgICAgIHByaW50KHJlcG9uc2VTZXJ2ZXVyWydwYXlsb2FkJ11bJ2Vycm9yX21lc3NhZ2UnXSkKICAgICAgICAgICAgY2FzZSBfOgogICAgICAgICAgICAgICAgcHJpbnQoIkVycmV1ciBsb3JzIGRlIGxhIGNvbmZpcm1hdGlvbiBkZSBsJ2Vudm9pLiIpCgogICAgZGVmIF9jaGVja19zdGF0cyhzZWxmKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIERlbWFuZGUgbGVzIHN0YXRpc3RpcXVlcyBhdSBzZXJ2ZXVyIGF2ZWMgbCdlbnTDqnRlIGBTVEFUU19SRVFVRVNUYC4KCiAgICAgICAgQWZmaWNoZSBsZXMgc3RhdGlzdGlxdWVzIMOgIGwnYWlkZSBkdSBnYWJhcml0IGBTVEFUU19ESVNQTEFZYC4KICAgICAgICAiIiIKICAgICAgICAjRW52b2kgZGUgbGEgZGVtYW5kZSBkZSBzdGF0aXN0aXF1ZS4KICAgICAgICBkZW1hbmRlU3RhdHMgPSBnbG91dGlscy5HbG9NZXNzYWdlKAogICAgICAgICAgICBoZWFkZXI9Z2xvdXRpbHMuSGVhZGVycy5TVEFUU19SRVFVRVNUCiAgICAgICAgKQogICAgICAgIHRyeToKICAgICAgICAgICAgZ2xvc29ja2V0LnNlbmRfbWVzZyhzZWxmLl9zb2NrZXQsIGpzb24uZHVtcHMoZGVtYW5kZVN0YXRzKSkKICAgICAgICBleGNlcHQgZ2xvc29ja2V0LkdMT1NvY2tldEVycm9yOgogICAgICAgICAgICBwcmludCgiRXJyZXVyLCBkZSBjb21tdW5pY2F0aW9uIGF2ZWMgbGUgc2VydmV1ciFcblZldWlsbGV6IHZvdXMgcmVjb25uZWN0ZXI6IikKICAgICAgICAgICAgc2VsZi5fbG9nb3V0KCkKICAgICAgICAKICAgICAgICAjUsOpY2VwdGlvbiBkZXMgc3RhdGlzdGlxdWVzIGV0IGFmZmljaGFnZS4KICAgICAgICB0cnk6CiAgICAgICAgICAgIHN0YXRzID1qc29uLmxvYWRzKGdsb3NvY2tldC5yZWN2X21lc2coc2VsZi5fc29ja2V0KSkKICAgICAgICBleGNlcHQgZ2xvc29ja2V0LkdMT1NvY2tldEVycm9yOgogICAgICAgICAgICBwcmludCgiRXJyZXVyLCBkZSBjb21tdW5pY2F0aW9uIGF2ZWMgbGUgc2VydmV1ciFcblZldWlsbGV6IHZvdXMgcmVjb25uZWN0ZXI6IikKICAgICAgICAgICAgc2VsZi5fbG9nb3V0KCkKCiAgICAgICAgbWF0Y2ggc3RhdHM6CiAgICAgICAgICAgIGNhc2UgeyJoZWFkZXIiOiBnbG91dGlscy5IZWFkZXJzLk9LfToKICAgICAgICAgICAgICAgIGlmICdwYXlsb2FkJyBpbiBzdGF0czoKICAgICAgICAgICAgICAgICAgICBhZmZpY2hhZ2VTdGF0cyA9IGdsb3V0aWxzLlNUQVRTX0RJU1BMQVkuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICBjb3VudD1zdGF0c1sicGF5bG9hZCJdWyJjb3VudCJdLAogICAgICAgICAgICAgICAgICAgICAgICBzaXplPXN0YXRzWyJwYXlsb2FkIl1bInNpemUiXSkKICAgICAgICAgICAgICAgICAgICBwcmludChhZmZpY2hhZ2VTdGF0cykKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkVycmV1ciBsb3JzIGwnYWNjw6hzIGF1eCBzdGF0aXN0aXF1ZXMuIikKICAgICAgICAgICAgY2FzZSBfOgogICAgICAgICAgICAgICAgcHJpbnQoIkVycmV1ciBsb3JzIGwnYWNjw6hzIGF1eCBzdGF0aXN0aXF1ZXMuIikKCiAgICBkZWYgX2xvZ291dChzZWxmKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIFByw6l2aWVucyBsZSBzZXJ2ZXVyIGF2ZWMgbCdlbnTDqnRlIGBBVVRIX0xPR09VVGAuCgogICAgICAgIE1ldCDDoCBqb3VyIGwnYXR0cmlidXQgYF91c2VybmFtZWAuCiAgICAgICAgIiIiCiAgICAgICAgbG9nT3V0TWVzc2FnZSA9IGdsb3V0aWxzLkdsb01lc3NhZ2UoCiAgICAgICAgICAgIGhlYWRlcj1nbG91dGlscy5IZWFkZXJzLkFVVEhfTE9HT1VUKQogICAgICAgIHRyeToKICAgICAgICAgICAgZ2xvc29ja2V0LnNlbmRfbWVzZyhzZWxmLl9zb2NrZXQsIGpzb24uZHVtcHMobG9nT3V0TWVzc2FnZSkpCiAgICAgICAgZXhjZXB0IGdsb3NvY2tldC5HTE9Tb2NrZXRFcnJvciBhcyBlOgogICAgICAgICAgICBwcmludCgiRXJyZXVyLCBsYSBjb25uZXhpb24gYXZlYyBsZSBzZXJ2ZXVyIGVzdCByb21wdWUhOiIsIGUpCiAgICAgICAgICAgIHNlbGYuX3VzZXJuYW1lID0gTm9uZQogICAgICAgICAgICBzZWxmLl9xdWl0KCkKCiAgICAgICAgc2VsZi5fdXNlcm5hbWUgPSBOb25lCgogICAgZGVmIHJ1bihzZWxmKSAtPiBOb25lOgogICAgICAgICIiIlBvaW50IGQnZW50csOpZSBkdSBjbGllbnQuIiIiCiAgICAgICAgc2hvdWxkX3F1aXQgPSBGYWxzZQoKICAgICAgICB3aGlsZSBub3Qgc2hvdWxkX3F1aXQ6CiAgICAgICAgICAgIGlmIG5vdCBzZWxmLl91c2VybmFtZToKICAgICAgICAgICAgICAgICMgQXV0aGVudGljYXRpb24gbWVudQogICAgICAgICAgICAgICAgcHJpbnQoZ2xvdXRpbHMuQ0xJRU5UX0FVVEhfQ0hPSUNFKQogICAgICAgICAgICAgICAgY2hvaXggPSBpbnB1dCgiRW50cmV6IHZvdHJlIGNob2l4IFsxLTNdOiIpCiAgICAgICAgICAgICAgICBtYXRjaCBjaG9peDoKICAgICAgICAgICAgICAgICAgICBjYXNlICIxIjoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVnaXN0ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgZ2xvc29ja2V0LkdMT1NvY2tldEVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiRXJyZXVyLCBsYSBjb25uZXhpb24gYXZlYyBsZSBzZXJ2ZXVyIGVzdCByb21wdWUhOiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZF9xdWl0ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBjYXNlICIyIjoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbG9naW4oKQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgZ2xvc29ja2V0LkdMT1NvY2tldEVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiRXJyZXVyLCBsYSBjb25uZXhpb24gYXZlYyBsZSBzZXJ2ZXVyIGVzdCByb21wdWUhOiIsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZF9xdWl0ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBjYXNlICIzIjoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcXVpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZF9xdWl0ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgIGNhc2UgXzogCiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMgTWFpbiBtZW51CiAgICAgICAgICAgICAgICBwcmludChnbG91dGlscy5DTElFTlRfVVNFX0NIT0lDRSkKICAgICAgICAgICAgICAgIGNob2l4TWVudUVtYWlsID0gaW5wdXQoIkVudHJleiB2b3RyZSBjaG9peCBbMS00XTogIikKICAgICAgICAgICAgICAgIG1hdGNoIGNob2l4TWVudUVtYWlsOgogICAgICAgICAgICAgICAgICAgIGNhc2UgIjEiOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZWFkX2VtYWlsKCkKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IGdsb3NvY2tldC5HTE9Tb2NrZXRFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkVycmV1ciwgbGEgY29ubmV4aW9uIGF2ZWMgbGUgc2VydmV1ciBlc3Qgcm9tcHVlIToiLCBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fdXNlcm5hbWUgPSBOb25lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZF9xdWl0ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBjYXNlICIyIjoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fc2VuZF9lbWFpbCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBnbG9zb2NrZXQuR0xPU29ja2V0RXJyb3IgYXMgZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJFcnJldXIsIGxhIGNvbm5leGlvbiBhdmVjIGxlIHNlcnZldXIgZXN0IHJvbXB1ZSE6IiwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3VzZXJuYW1lID0gTm9uZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcXVpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRfcXVpdCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiMyI6CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NoZWNrX3N0YXRzKCkKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IGdsb3NvY2tldC5HTE9Tb2NrZXRFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkVycmV1ciwgbGEgY29ubmV4aW9uIGF2ZWMgbGUgc2VydmV1ciBlc3Qgcm9tcHVlIToiLCBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fdXNlcm5hbWUgPSBOb25lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZF9xdWl0ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBjYXNlICI0IjoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbG9nb3V0KCkKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IGdsb3NvY2tldC5HTE9Tb2NrZXRFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkVycmV1ciwgbGEgY29ubmV4aW9uIGF2ZWMgbGUgc2VydmV1ciBlc3Qgcm9tcHVlIToiLCBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fdXNlcm5hbWUgPSBOb25lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZF9xdWl0ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBjYXNlIF86CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJDaG9peCBpbnZhbGlkZS4gVmV1aWxsZXogcsOpZXNzYXllci4iKQogICAgICAgICAgICAgICAgICAgICAgICBwYXNzCgoKZGVmIF9tYWluKCkgLT4gaW50OgogICAgcGFyc2VyID0gYXJncGFyc2UuQXJndW1lbnRQYXJzZXIoKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgiLWQiLCAiLS1kZXN0aW5hdGlvbiIsIGFjdGlvbj0ic3RvcmUiLAogICAgICAgICAgICAgICAgICAgICAgICBkZXN0PSJkZXN0IiwgcmVxdWlyZWQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iQWRyZXNzZSBJUC9VUkwgZHUgc2VydmV1ci4iKQogICAgYXJncyA9IHBhcnNlci5wYXJzZV9hcmdzKHN5cy5hcmd2WzE6XSkKICAgIGNsaWVudCA9IENsaWVudChhcmdzLmRlc3QpCiAgICBjbGllbnQucnVuKCkKICAgIHJldHVybiAwCgoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIHN5cy5leGl0KF9tYWluKCkpCg==","server_file":"IiIiXApHTE8tMjAwMCBUcmF2YWlsIHByYXRpcXVlIDQgLSBTZXJ2ZXVyCk5vbXMgZXQgbnVtw6lyb3Mgw6l0dWRpYW50czoKLSBEb21pbmlxdWUgU2FpbnQtUGllcnJlIDExMSAxMzQgNTE2Ci0gQWRhbSBLaXRva28gNTM2IDg2OCA3MDAKLSBQZW5nZHdpbmTDqSBBbGV4IEF1Z3VzdGUgT3VlZHJhb2dvIDExMSAyNTAgMDU4CiIiIgoKaW1wb3J0IGhhc2hsaWIKaW1wb3J0IGhtYWMKaW1wb3J0IGpzb24KaW1wb3J0IG9zCmltcG9ydCBwYXRobGliCmltcG9ydCBzZWxlY3QKaW1wb3J0IHNvY2tldAppbXBvcnQgc3lzCmltcG9ydCByZQoKaW1wb3J0IGdsb3NvY2tldAppbXBvcnQgZ2xvdXRpbHMKCgpjbGFzcyBTZXJ2ZXI6CiAgICAiIiJTZXJ2ZXVyIG1haWwgQGdsbzIwMDAuY2EuIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgUHLDqXBhcmUgbGUgc29ja2V0IGR1IHNlcnZldXIgYF9zZXJ2ZXJfc29ja2V0YAogICAgICAgIGV0IGxlIG1ldCBlbiBtb2RlIMOpY291dGUuCgogICAgICAgIFByw6lwYXJlIGxlcyBhdHRyaWJ1dHMgc3VpdmFudHM6CiAgICAgICAgLSBgX2NsaWVudF9zb2NzYCB1bmUgbGlzdGUgZGVzIHNvY2tldHMgY2xpZW50cy4KICAgICAgICAtIGBfbG9nZ2VkX3VzZXJzYCB1biBkaWN0aW9ubmFpcmUgYXNzb2NpYW50IGNoYXF1ZQogICAgICAgICAgICBzb2NrZXQgY2xpZW50IMOgIHVuIG5vbSBkJ3V0aWxpc2F0ZXVyLgoKICAgICAgICBTJ2Fzc3VyZSBxdWUgbGVzIGRvc3NpZXJzIGRlIGRvbm7DqWVzIGR1IHNlcnZldXIgZXhpc3RlbnQuCiAgICAgICAgIiIiCiAgICAgICAgIyBzZWxmLl9zZXJ2ZXJfc29ja2V0CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLl9zZXJ2ZXJfc29ja2V0ID0gc29ja2V0LnNvY2tldChzb2NrZXQuQUZfSU5FVCwgc29ja2V0LlNPQ0tfU1RSRUFNKQogICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICBwcmludCgiRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGR1IHNvY2tldF9zZXJ2ZXVyIikKICAgICAgICAgICAgc3lzLmV4aXQoLTEpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLl9zZXJ2ZXJfc29ja2V0LnNldHNvY2tvcHQoc29ja2V0LlNPTF9TT0NLRVQsIHNvY2tldC5TT19SRVVTRUFERFIsIDEpCiAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgIHByaW50KCJFcnJldXIgbG9ycyBkZSBsYSBjcsOpYXRpb24gZHUgc29ja2V0X3NlcnZldXIiKQogICAgICAgICAgICBzeXMuZXhpdCgtMSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuX3NlcnZlcl9zb2NrZXQuYmluZCgoIjEyNy4wLjAuMSIsIGdsb3V0aWxzLkFQUF9QT1JUKSkKICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgcHJpbnQoIkVycmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkdSBzb2NrZXRfc2VydmV1ciIpCiAgICAgICAgICAgIHN5cy5leGl0KC0xKQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5fc2VydmVyX3NvY2tldC5saXN0ZW4oKQogICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICBwcmludCgiRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGR1IHNvY2tldF9zZXJ2ZXVyIikKICAgICAgICAgICAgc3lzLmV4aXQoLTEpCiAgICAgICAgIyBzZWxmLl9jbGllbnRfc29jcwogICAgICAgIHNlbGYuX2NsaWVudF9zb2NzOiBsaXN0W3NvY2tldC5zb2NrZXRdID0gW10KCiAgICAgICAgIyBzZWxmLl9sb2dnZWRfdXNlcnMKICAgICAgICBzZWxmLl9sb2dnZWRfdXNlcnM6IGRpY3QgPSB7fQogICAgICAgICMgLi4uCiAgICAgICAgdHJ5OgogICAgICAgICAgICBwYXRobGliLlBhdGgoZ2xvdXRpbHMuU0VSVkVSX0RBVEFfRElSKS5ta2RpcigpCiAgICAgICAgZXhjZXB0IEZpbGVFeGlzdHNFcnJvcjoKICAgICAgICAgICAgcGFzcwogICAgICAgIHRyeToKICAgICAgICAgICAgKHBhdGhsaWIuUGF0aChnbG91dGlscy5TRVJWRVJfREFUQV9ESVIpL2dsb3V0aWxzLlNFUlZFUl9MT1NUX0RJUikubWtkaXIoKQogICAgICAgIGV4Y2VwdCBGaWxlRXhpc3RzRXJyb3I6CiAgICAgICAgICAgIHBhc3MKCiAgICBkZWYgY2xlYW51cChzZWxmKSAtPiBOb25lOgogICAgICAgICIiIkZlcm1lIHRvdXRlcyBsZXMgY29ubmV4aW9ucyByw6lzaWR1ZWxsZXMuIiIiCiAgICAgICAgZm9yIGNsaWVudF9zb2MgaW4gc2VsZi5fY2xpZW50X3NvY3M6CiAgICAgICAgICAgIGNsaWVudF9zb2MuY2xvc2UoKQogICAgICAgIHNlbGYuX3NlcnZlcl9zb2NrZXQuY2xvc2UoKQoKICAgIGRlZiBfYWNjZXB0X2NsaWVudChzZWxmKSAtPiBOb25lOgogICAgICAgICIiIkFjY2VwdGUgdW4gbm91dmVhdSBjbGllbnQuIiIiCiAgICAgICAgY2xpZW50X3NvY2tldCwgc29ja2V0X2FkZHIgPSBzZWxmLl9zZXJ2ZXJfc29ja2V0LmFjY2VwdCgpCiAgICAgICAgc2VsZi5fY2xpZW50X3NvY3MuYXBwZW5kKGNsaWVudF9zb2NrZXQpCgogICAgZGVmIF9yZW1vdmVfY2xpZW50KHNlbGYsIGNsaWVudF9zb2M6IHNvY2tldC5zb2NrZXQpIC0+IE5vbmU6CiAgICAgICAgIiIiUmV0aXJlIGxlIGNsaWVudCBkZXMgc3RydWN0dXJlcyBkZSBkb25uw6llcyBldCBmZXJtZSBzYSBjb25uZXhpb24uIiIiCiAgICAgICAgaWYgY2xpZW50X3NvYyBpbiBzZWxmLl9sb2dnZWRfdXNlcnM6CiAgICAgICAgICAgIHNlbGYuX2xvZ2dlZF91c2Vycy5wb3AoY2xpZW50X3NvYykKICAgICAgICBpZiBjbGllbnRfc29jIGluIHNlbGYuX2NsaWVudF9zb2NzOgogICAgICAgICAgICBzZWxmLl9jbGllbnRfc29jcy5yZW1vdmUoY2xpZW50X3NvYykKICAgICAgICBjbGllbnRfc29jLmNsb3NlKCkKCiAgICBkZWYgX2NyZWF0ZV9hY2NvdW50KHNlbGYsIGNsaWVudF9zb2M6IHNvY2tldC5zb2NrZXQsCiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IGdsb3V0aWxzLkF1dGhQYXlsb2FkCiAgICAgICAgICAgICAgICAgICAgICAgICkgLT4gZ2xvdXRpbHMuR2xvTWVzc2FnZToKICAgICAgICAiIiIKICAgICAgICBDcsOpZSB1biBjb21wdGUgw6AgcGFydGlyIGRlcyBkb25uw6llcyBkdSBwYXlsb2FkLgoKICAgICAgICBTaSBsZXMgaWRlbnRpZmlhbnRzIHNvbnQgdmFsaWRlcywgY3LDqWVlIGxlIGRvc3NpZXIgZGUgbCd1dGlsaXNhdGV1ciwKICAgICAgICBhc3NvY2llIGxlIHNvY2tldCBhdSBub3V2ZWwgbCd1dGlsaXNhdGV1ciBldCByZXRvdXJuZSB1biBzdWNjw6hzLAogICAgICAgIHNpbm9uIHJldG91cm5lIHVuIG1lc3NhZ2UgZCdlcnJldXIuCiAgICAgICAgIiIiCiAgICAgICAgI01lc3NhZ2UgZCdlcnJldXIuCiAgICAgICAgZXJyTWVzc2FnZSA9ICIiIkxhIGNyw6lhdGlvbiDDoCDDqWNob3XDqWU6CiAgICAgICAgLSBMZSBub20gZCd1dGlsaXNhdGV1ciBlc3QgaW52YWxpZGUuCiAgICAgICAgLSBMZSBtb3QgZGUgcGFzc2Ugbidlc3QgcGFzIGFzc2V6IHPDu3IuIiIiCgogICAgICAgICNWYWxpZGF0aW9uIGRlcyBpbmZvcm1hdGlvbnMgZm91cm5pcyBwYXMgbGUgY2xpZW50LgogICAgICAgIGlmICgocmUuc2VhcmNoKHIiW2EtekEtWjAtOV8uLV0rIiwgcGF5bG9hZFsndXNlcm5hbWUnXSkgaXMgbm90IE5vbmUpIAogICAgICAgICAgICBhbmQgKHJlLnNlYXJjaChyIl4oPz0uKltBLVpdKSg/PS4qXGQpLnsxMCx9JCIsIHBheWxvYWRbJ3Bhc3N3b3JkJ10pIGlzIG5vdCBOb25lKSk6CgogICAgICAgICAgICAjIENyw6lhdGlvbiBkdSBkb3NzaWVyIGQndXRpbGlzYXRldXIKICAgICAgICAgICAgdXNlckRvc3NpZXIgPSAocGF0aGxpYi5QYXRoKGdsb3V0aWxzLlNFUlZFUl9EQVRBX0RJUikpL3BheWxvYWRbJ3VzZXJuYW1lJ10KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdXNlckRvc3NpZXIubWtkaXIoKQogICAgICAgICAgICBleGNlcHQgRmlsZUV4aXN0c0Vycm9yOgogICAgICAgICAgICAgICAgIyBOb20gZCd1dGlsaXNhdGV1ciBkw6lqw6AgdXRpbGlzw6ksIEVudm95ZXIgdW4gbWVzc2VnZSBFUlJPUgogICAgICAgICAgICAgICAgZXJyUGF5bG9hZCA9IGdsb3V0aWxzLkVycm9yUGF5bG9hZChlcnJvcl9tZXNzYWdlPWVyck1lc3NhZ2UpCiAgICAgICAgICAgICAgICByZXR1cm4gZ2xvdXRpbHMuR2xvTWVzc2FnZShoZWFkZXI9Z2xvdXRpbHMuSGVhZGVycy5FUlJPUixwYXlsb2FkPWVyclBheWxvYWQpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEhhY2hhZ2UgZHUgbW90IGRlIHBhc3NlLgogICAgICAgICAgICBoYXNoZXJQYXNzID0gaGFzaGxpYi5zaGEzXzUxMigpCiAgICAgICAgICAgIGhhc2hlclBhc3MudXBkYXRlKHBheWxvYWRbJ3Bhc3N3b3JkJ10uZW5jb2RlKCd1dGYtOCcpKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAocGF0aGxpYi5QYXRoKGdsb3V0aWxzLlNFUlZFUl9EQVRBX0RJUikvcGF5bG9hZFsndXNlcm5hbWUnXS9nbG91dGlscy5QQVNTV09SRF9GSUxFTkFNRSkud3JpdGVfdGV4dChoYXNoZXJQYXNzLmhleGRpZ2VzdCgpKQogICAgICAgICAgICBleGNlcHQgRmlsZUV4aXN0c0Vycm9yOgogICAgICAgICAgICAgICAgI1N1cHByZXNzaW9uIGR1IGRvc3NpZXIgdXRpbGlzYXRldXIgY3LDqWUKICAgICAgICAgICAgICAgIChwYXRobGliLlBhdGgoZ2xvdXRpbHMuU0VSVkVSX0RBVEFfRElSKS9wYXlsb2FkWyd1c2VybmFtZSddKS5ybWRpcigpCiAgICAgICAgICAgICAgICByZXR1cm4gZ2xvdXRpbHMuR2xvTWVzc2FnZShoZWFkZXI9Z2xvdXRpbHMuSGVhZGVycy5FUlJPUiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ9Z2xvdXRpbHMuRXJyb3JQYXlsb2FkKGVycm9yX21lc3NhZ2U9IkVycmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkdSBjb21wdGUgZCd1dGlsaXNhdGV1ciIpKQogICAgICAgICAgICAjIEVudm95ZXIgdW4gbWVzc2FnZSBPSyBldCBhc3NvY2lhdGlvbiBkdSBzb2NrZXQKICAgICAgICAgICAgc2VsZi5fbG9nZ2VkX3VzZXJzW2NsaWVudF9zb2NdID0gcGF5bG9hZFsndXNlcm5hbWUnXQogICAgICAgICAgICByZXBvbnNlID0gZ2xvdXRpbHMuR2xvTWVzc2FnZShoZWFkZXI9Z2xvdXRpbHMuSGVhZGVycy5PSykKICAgICAgICAgICAgCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBFbnZveWVyIHVuIG1lc3NhZ2UgRVJST1IKICAgICAgICAgICAgcmVwb25zZSA9IGdsb3V0aWxzLkdsb01lc3NhZ2UoaGVhZGVyPWdsb3V0aWxzLkhlYWRlcnMuRVJST1IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZD1nbG91dGlscy5FcnJvclBheWxvYWQoZXJyb3JfbWVzc2FnZT1lcnJNZXNzYWdlKSkKICAgICAgICByZXR1cm4gcmVwb25zZQoKICAgIGRlZiBfbG9naW4oc2VsZiwgY2xpZW50X3NvYzogc29ja2V0LnNvY2tldCwgcGF5bG9hZDogZ2xvdXRpbHMuQXV0aFBheWxvYWQKICAgICAgICAgICAgICAgKSAtPiBnbG91dGlscy5HbG9NZXNzYWdlOgogICAgICAgICIiIgogICAgICAgIFbDqXJpZmllIHF1ZSBsZXMgZG9ubsOpZXMgZm91cm5pZXMgY29ycmVzcG9uZGVudCDDoCB1biBjb21wdGUgZXhpc3RhbnQuCgogICAgICAgIFNpIGxlcyBpZGVudGlmaWFudHMgc29udCB2YWxpZGVzLCBhc3NvY2llIGxlIHNvY2tldCDDoCBsJ3V0aWxpc2F0ZXVyIGV0CiAgICAgICAgcmV0b3VybmUgdW4gc3VjY8Oocywgc2lub24gcmV0b3VybmUgdW4gbWVzc2FnZSBkJ2VycmV1ci4KICAgICAgICAiIiIKICAgICAgICBjaGVtaW4gPSBwYXRobGliLlBhdGgoZ2xvdXRpbHMuU0VSVkVSX0RBVEFfRElSKQogICAgICAgIGlmIChjaGVtaW4vcGF5bG9hZFsndXNlcm5hbWUnXSkuZXhpc3RzKCk6CiAgICAgICAgICAgICMgVsOpcmlmaWVyIGxlIG1kcAogICAgICAgICAgICBoYXNoZXJQYXNzID0gaGFzaGxpYi5zaGEzXzUxMigpCiAgICAgICAgICAgIGhhc2hlclBhc3MudXBkYXRlKHBheWxvYWRbJ3Bhc3N3b3JkJ10uZW5jb2RlKCd1dGYtOCcpKQogICAgICAgICAgICBpZiBobWFjLmNvbXBhcmVfZGlnZXN0KGhhc2hlclBhc3MuaGV4ZGlnZXN0KCksKGNoZW1pbi9wYXlsb2FkWyd1c2VybmFtZSddL2dsb3V0aWxzLlBBU1NXT1JEX0ZJTEVOQU1FKS5yZWFkX3RleHQoKSk6CiAgICAgICAgICAgICAgICBzZWxmLl9sb2dnZWRfdXNlcnNbY2xpZW50X3NvY10gPSBwYXlsb2FkWyd1c2VybmFtZSddCiAgICAgICAgICAgICAgICByZXBvbnNlID0gZ2xvdXRpbHMuR2xvTWVzc2FnZShoZWFkZXI9Z2xvdXRpbHMuSGVhZGVycy5PSykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMgTW90IGRlIHBhc3NlIGludmFsaWRlLCBlbnZvaSBkJ3VuIG1lc3NhZ2UgZCdlcnJldXIuCiAgICAgICAgICAgICAgICByZXBvbnNlID0gZ2xvdXRpbHMuR2xvTWVzc2FnZShoZWFkZXI9Z2xvdXRpbHMuSGVhZGVycy5FUlJPUiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkPWdsb3V0aWxzLkVycm9yUGF5bG9hZChlcnJvcl9tZXNzYWdlPSJMZSBtb3QgZGUgcGFzc2UgZXN0IGludmFsaWRlIikpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBMZSBub20gZCd1dGlsaXNhdGV1ciBlc3QgaW52YWxpZGUsIGVudm9pIGQndW4gbWVzc2FnZSBkJ2VycmV1ci4KICAgICAgICAgICAgcmVwb25zZSA9IGdsb3V0aWxzLkdsb01lc3NhZ2UoaGVhZGVyPWdsb3V0aWxzLkhlYWRlcnMuRVJST1IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkPWdsb3V0aWxzLkVycm9yUGF5bG9hZChlcnJvcl9tZXNzYWdlPSJMZSBub20gZCd1dGlsaXNhdGV1ciBlc3QgaW52YWxpZGUiKSkKICAgICAgICByZXR1cm4gcmVwb25zZQoKICAgIGRlZiBfbG9nb3V0KHNlbGYsIGNsaWVudF9zb2M6IHNvY2tldC5zb2NrZXQpIC0+IE5vbmU6CiAgICAgICAgIiIiRMOpY29ubmVjdGUgdW4gdXRpbGlzYXRldXIuIiIiCiAgICAgICAgc2VsZi5fbG9nZ2VkX3VzZXJzLnBvcChjbGllbnRfc29jKQoKICAgIGRlZiBfZ2V0X2VtYWlsX2xpc3Qoc2VsZiwgY2xpZW50X3NvYzogc29ja2V0LnNvY2tldAogICAgICAgICAgICAgICAgICAgICAgICApIC0+IGdsb3V0aWxzLkdsb01lc3NhZ2U6CiAgICAgICAgIiIiCiAgICAgICAgUsOpY3Vww6hyZSBsYSBsaXN0ZSBkZXMgY291cnJpZWxzIGRlIGwndXRpbGlzYXRldXIgYXNzb2Npw6kgYXUgc29ja2V0LgogICAgICAgIExlcyDDqWzDqW1lbnRzIGRlIGxhIGxpc3RlIHNvbnQgY29uc3RydWl0cyDDoCBsJ2FpZGUgZHUgZ2FiYXJpdAogICAgICAgIFNVQkpFQ1RfRElTUExBWSBldCBzb250IG9yZG9ubsOpcyBkdSBwbHVzIHLDqWNlbnQgYXUgcGx1cyBhbmNpZW4uCgogICAgICAgIFVuZSBhYnNlbmNlIGRlIGNvdXJyaWVsIG4nZXN0IHBhcyB1bmUgZXJyZXVyLCBtYWlzIHVuZSBsaXN0ZSB2aWRlLgogICAgICAgICIiIgogICAgICAgIGNoZW1pblVzZXIgPSBwYXRobGliLlBhdGgoZ2xvdXRpbHMuU0VSVkVSX0RBVEFfRElSLCBzZWxmLl9sb2dnZWRfdXNlcnNbY2xpZW50X3NvY10pCiAgICAgICAgZW1haWxMaXN0OiBsaXN0ID0gW10KICAgICAgICBlbWFpbENvbXB0ZSA9IDAKICAgICAgICBmb3IgZW1haWwgaW4gc29ydGVkKGNoZW1pblVzZXIuaXRlcmRpcigpLCBrZXk9b3MucGF0aC5nZXRtdGltZSwgcmV2ZXJzZT1UcnVlKToKICAgICAgICAgICAgaWYgbm90IGVtYWlsLnNhbWVmaWxlKGNoZW1pblVzZXIvZ2xvdXRpbHMuUEFTU1dPUkRfRklMRU5BTUUpOgogICAgICAgICAgICAgICAgZW1haWxDb21wdGUgKz0gMQogICAgICAgICAgICAgICAgZW1haWxKc29uID0gKGpzb24ubG9hZHMoZW1haWwucmVhZF90ZXh0KCkpKQogICAgICAgICAgICAgICAgZW1haWxMaXN0LmFwcGVuZChnbG91dGlscy5TVUJKRUNUX0RJU1BMQVkuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIG51bWJlcj1lbWFpbENvbXB0ZSwKICAgICAgICAgICAgICAgICAgICBzZW5kZXI9ZW1haWxKc29uWydzZW5kZXInXSwKICAgICAgICAgICAgICAgICAgICBzdWJqZWN0PWVtYWlsSnNvblsnc3ViamVjdCddLAogICAgICAgICAgICAgICAgICAgIGRhdGU9ZW1haWxKc29uWydkYXRlJ10pKQogICAgICAgIHJlcEVtYWlsTGlzdCA9IGdsb3V0aWxzLkdsb01lc3NhZ2UoCiAgICAgICAgICAgIGhlYWRlcj1nbG91dGlscy5IZWFkZXJzLk9LLAogICAgICAgICAgICBwYXlsb2FkPWdsb3V0aWxzLkVtYWlsTGlzdFBheWxvYWQoZW1haWxfbGlzdD1lbWFpbExpc3QpCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gcmVwRW1haWxMaXN0CgogICAgZGVmIF9nZXRfZW1haWwoc2VsZiwgY2xpZW50X3NvYzogc29ja2V0LnNvY2tldCwKICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IGdsb3V0aWxzLkVtYWlsQ2hvaWNlUGF5bG9hZAogICAgICAgICAgICAgICAgICAgKSAtPiBnbG91dGlscy5HbG9NZXNzYWdlOgogICAgICAgICIiIgogICAgICAgIFLDqWN1cMOocmUgbGUgY29udGVudSBkZSBsJ2VtYWlsIGRhbnMgbGUgZG9zc2llciBkZSBsJ3V0aWxpc2F0ZXVyIGFzc29jacOpCiAgICAgICAgYXUgc29ja2V0LgogICAgICAgICIiIgogICAgICAgIGNoZW1pblVzZXIgPSBwYXRobGliLlBhdGgoZ2xvdXRpbHMuU0VSVkVSX0RBVEFfRElSLCBzZWxmLl9sb2dnZWRfdXNlcnNbY2xpZW50X3NvY10pCiAgICAgICAgZW1haWxMaXN0OiBsaXN0ID0gW10KICAgICAgICBmb3IgZW1haWwgaW4gc29ydGVkKGNoZW1pblVzZXIuaXRlcmRpcigpLCBrZXk9b3MucGF0aC5nZXRtdGltZSwgcmV2ZXJzZT1UcnVlKToKICAgICAgICAgICAgaWYgbm90IGVtYWlsLnNhbWVmaWxlKGNoZW1pblVzZXIvZ2xvdXRpbHMuUEFTU1dPUkRfRklMRU5BTUUpOgogICAgICAgICAgICAgICAgZW1haWxMaXN0LmFwcGVuZChlbWFpbCkKICAgICAgICBlbWFpbFJlcSA9IGpzb24ubG9hZHMoZW1haWxMaXN0W2ludChwYXlsb2FkWyJjaG9pY2UiXSkgLSAxXS5yZWFkX3RleHQoKSkKICAgICAgICByZXR1cm4gZ2xvdXRpbHMuR2xvTWVzc2FnZSgKICAgICAgICAgICAgaGVhZGVyPWdsb3V0aWxzLkhlYWRlcnMuT0ssCiAgICAgICAgICAgIHBheWxvYWQ9ZW1haWxSZXEKICAgICAgICApCgogICAgZGVmIF9nZXRfc3RhdHMoc2VsZiwgY2xpZW50X3NvYzogc29ja2V0LnNvY2tldCkgLT4gZ2xvdXRpbHMuR2xvTWVzc2FnZToKICAgICAgICAiIiIKICAgICAgICBSw6ljdXDDqHJlIGxlIG5vbWJyZSBkZSBjb3VycmllbHMgZXQgbGEgdGFpbGxlIGR1IGRvc3NpZXIgZXQgZGVzIGZpY2hpZXJzCiAgICAgICAgZGUgbCd1dGlsaXNhdGV1ciBhc3NvY2nDqSBhdSBzb2NrZXQuCiAgICAgICAgIiIiCiAgICAgICAgY2hlbWluVXNlciA9IChwYXRobGliLlBhdGgoZ2xvdXRpbHMuU0VSVkVSX0RBVEFfRElSKSkvc2VsZi5fbG9nZ2VkX3VzZXJzW2NsaWVudF9zb2NdCgogICAgICAgICNOb21icmUgZGUgY291cnJpZWwuCiAgICAgICAgY291bnRTdGF0cyA9IDAKICAgICAgICBzaXplU3RhdHMgPSAwCiAgICAgICAgZm9yIGZpY2hpZXIgaW4gY2hlbWluVXNlci5pdGVyZGlyKCk6CiAgICAgICAgICAgIGlmIGZpY2hpZXIgPT0gY2hlbWluVXNlci9nbG91dGlscy5QQVNTV09SRF9GSUxFTkFNRToKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNvdW50U3RhdHMgKz0gMQogICAgICAgICAgICAgICAgc2l6ZVN0YXRzICs9IGZpY2hpZXIuc3RhdCgpLnN0X3NpemUKCiAgICAgICAgI0Nyw6lhdGlvbiBkdSBtZXNzYWdlIGQnZW52b2kgZGVzIHN0YXRpc3RpcXVlcyBhdSBjbGllbnQuCiAgICAgICAgcmVwb25zZVN0YXRzID0gZ2xvdXRpbHMuR2xvTWVzc2FnZSgKICAgICAgICAgICAgaGVhZGVyPWdsb3V0aWxzLkhlYWRlcnMuT0ssCiAgICAgICAgICAgIHBheWxvYWQ9Z2xvdXRpbHMuU3RhdHNQYXlsb2FkKAogICAgICAgICAgICAgICAgY291bnQ9Y291bnRTdGF0cywKICAgICAgICAgICAgICAgIHNpemU9c2l6ZVN0YXRzCiAgICAgICAgICAgICkKICAgICAgICApCiAgICAgICAgcmV0dXJuIHJlcG9uc2VTdGF0cwoKICAgIGRlZiBfc2VuZF9lbWFpbChzZWxmLCBwYXlsb2FkOiBnbG91dGlscy5FbWFpbENvbnRlbnRQYXlsb2FkCiAgICAgICAgICAgICAgICAgICAgKSAtPiBnbG91dGlscy5HbG9NZXNzYWdlOgogICAgICAgICIiIgogICAgICAgIETDqXRlcm1pbmUgc2kgbCdlbnZvaSBlc3QgaW50ZXJuZSBvdSBleHRlcm5lIGV0OgogICAgICAgIC0gU2kgbCdlbnZvaSBlc3QgaW50ZXJuZSwgw6ljcmlzIGxlIG1lc3NhZ2UgdGVsIHF1ZWwgZGFucyBsZSBkb3NzaWVyCiAgICAgICAgZHUgZGVzdGluYXRhaXJlLgogICAgICAgIC0gU2kgbGUgZGVzdGluYXRhaXJlIG4nZXhpc3RlIHBhcywgcGxhY2UgbGUgbWVzc2FnZSBkYW5zIGxlIGRvc3NpZXIKICAgICAgICBTRVJWRVJfTE9TVF9ESVIgZXQgY29uc2lkw6hyZSBsJ2Vudm9pIGNvbW1lIHVuIMOpY2hlYy4KICAgICAgICAtIFNpIGxlIGRlc3RpbmF0YWlyZSBlc3QgZXh0ZXJuZSwgY29uc2lkw6hyZSBsJ2Vudm9pIGNvbW1lIHVuIMOpY2hlYy4KCiAgICAgICAgUmV0b3VybmUgdW4gbWVzc2FuZ2UgaW5kaXF1YW50IGxlIHN1Y2PDqHMgb3UgbCfDqWNoZWMgZGUgbCdvcMOpcmF0aW9uLgogICAgICAgICIiIgogICAgICAgIGlmIHJlLnNlYXJjaChyIihAW2EtekEtWjAtOV0rXC5bYS16QS1aXSspJCIsIHBheWxvYWRbJ2Rlc3RpbmF0aW9uJ10pIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiByZS5zZWFyY2gociIoQCIrZ2xvdXRpbHMuU0VSVkVSX0RPTUFJTisiKSQiLCBwYXlsb2FkWydkZXN0aW5hdGlvbiddKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGlmICgocGF0aGxpYi5QYXRoKGdsb3V0aWxzLlNFUlZFUl9EQVRBX0RJUikpLyhyZS5zcGxpdChyIihAW2EtekEtWjAtOV0rXC5bYS16QS1aXSspJCIsIHBheWxvYWRbImRlc3RpbmF0aW9uIl0pWzBdKSkuZXhpc3RzKCk6CiAgICAgICAgICAgICAgICAgICAgI0Rlc3RpbmF0aW9uIGludGVybmUKICAgICAgICAgICAgICAgICAgICBjaGVtaW5VdGlsaXNhdGV1ciA9IChwYXRobGliLlBhdGgoZ2xvdXRpbHMuU0VSVkVSX0RBVEFfRElSKSkvKHJlLnNwbGl0KHIiKEBbYS16QS1aMC05XStcLlthLXpBLVpdKykkIiwgcGF5bG9hZFsiZGVzdGluYXRpb24iXSlbMF0pCiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAoY2hlbWluVXRpbGlzYXRldXIvKHBheWxvYWRbImRhdGUiXStwYXlsb2FkWyJzZW5kZXIiXSkpLndyaXRlX3RleHQoanNvbi5kdW1wcyhwYXlsb2FkKSkKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRmlsZUV4aXN0c0Vycm9yOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiZXJyZXVyLCBsZSBmaWNoaWVyIGV4aXN0ZSBkw6lqw6AhIikKICAgICAgICAgICAgICAgICAgICBlbWFpbENvbmZpcm1hdGlvbiA9IGdsb3V0aWxzLkdsb01lc3NhZ2UoCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcj1nbG91dGlscy5IZWFkZXJzLk9LCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAjIERlc3RpbmF0YWlyZSBpbnRlcm5lIGluY29ubnUKICAgICAgICAgICAgICAgICAgICBjaGVtaW5QZXJkdSA9IChwYXRobGliLlBhdGgoZ2xvdXRpbHMuU0VSVkVSX0RBVEFfRElSKSkvZ2xvdXRpbHMuU0VSVkVSX0xPU1RfRElSCiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAoY2hlbWluUGVyZHUvKHBheWxvYWRbImRhdGUiXStwYXlsb2FkWyJkZXN0aW5hdGlvbiJdKSkud3JpdGVfdGV4dChqc29uLmR1bXBzKHBheWxvYWQpKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBGaWxlRXhpc3RzRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJFcnJldXIsIGxlIGZpY2hpZXIgZXhpc3RlIGTDqWrDoCEiKQogICAgICAgICAgICAgICAgICAgIGVtYWlsQ29uZmlybWF0aW9uID0gZ2xvdXRpbHMuR2xvTWVzc2FnZSgKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyPWdsb3V0aWxzLkhlYWRlcnMuRVJST1IsCiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ9Z2xvdXRpbHMuRXJyb3JQYXlsb2FkKGVycm9yX21lc3NhZ2U9IiIiVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkZSBsJ2Vudm9pIGR1IG1lc3NhZ2UhXG5MJ2FkZHJlc3NlIGRlIGRlc3RpbmF0aW9uIGVzdCBpbnZhbGlkZSIiIikpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgI0Rlc3RpbmF0aW9uIGV4dGVybmUKICAgICAgICAgICAgZW1haWxDb25maXJtYXRpb24gPSBnbG91dGlscy5HbG9NZXNzYWdlKAogICAgICAgICAgICAgICAgaGVhZGVyPWdsb3V0aWxzLkhlYWRlcnMuRVJST1IsCiAgICAgICAgICAgICAgICBwYXlsb2FkPWdsb3V0aWxzLkVycm9yUGF5bG9hZChlcnJvcl9tZXNzYWdlPSIiIlVuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbCdlbnZvaSBkdSBtZXNzYWdlIQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMJ2FkZHJlc3NlIGRlIGRlc3RpbmF0aW9uIGVzdCBpbnZhbGlkZSIiIikpCgogICAgICAgIHJldHVybiBlbWFpbENvbmZpcm1hdGlvbgoKICAgIGRlZiBydW4oc2VsZik6CiAgICAgICAgIiIiUG9pbnQgZCdlbnRyw6llIGR1IHNlcnZldXIuIiIiCiAgICAgICAgd2FpdGVycyA9IFtdCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgIyBTZWxlY3QgcmVhZGFibGUgc29ja2V0cwogICAgICAgICAgICAjIHRyeToKICAgICAgICAgICAgIyAgICAgcmVzdWx0ID0gc2VsZWN0LnNlbGVjdChbc2VsZi5fc2VydmVyX3NvY2tldF0gKyBzZWxmLl9jbGllbnRfc29jcywgW10sIFtdKQogICAgICAgICAgICAjIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgICAgICMgICAgIHByaW50KCJFcnJldXIgbG9ycyBkZSBsYSBzZWxlY3Rpb24uIikKICAgICAgICAgICAgIyAgICAgc3lzLmV4aXQoLTEpCiAgICAgICAgICAgIHJlc3VsdCA9IHNlbGVjdC5zZWxlY3QoW3NlbGYuX3NlcnZlcl9zb2NrZXRdICsgc2VsZi5fY2xpZW50X3NvY3MsIFtdLCBbXSkKICAgICAgICAgICAgd2FpdGVyczogbGlzdFtzb2NrZXQuc29ja2V0XSA9IHJlc3VsdFswXQogICAgICAgICAgICBmb3Igd2FpdGVyIGluIHdhaXRlcnM6CiAgICAgICAgICAgICAgICAjIEhhbmRsZSBzb2NrZXRzCiAgICAgICAgICAgICAgICBpZiB3YWl0ZXIgPT0gc2VsZi5fc2VydmVyX3NvY2tldDoKICAgICAgICAgICAgICAgICAgICBzZWxmLl9hY2NlcHRfY2xpZW50KCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0ganNvbi5sb2FkcyhnbG9zb2NrZXQucmVjdl9tZXNnKHdhaXRlcikpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IGpzb24uSlNPTkRlY29kZUVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZW1vdmVfY2xpZW50KHdhaXRlcikKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkVycmV1ciBsb3JzIGRlIGwnYXV0aGVudGlmaWNhdGlvbiBkdSBzb2NrZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAjIHByaW50KCJFcnJldXIgbG9ycyBkZSBsJ2V4dHJhY3Rpb24gZGVzIGluZm9zIGR1IG1lc3NhZ2VzLiIpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IGdsb3NvY2tldC5HTE9Tb2NrZXRFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVtb3ZlX2NsaWVudCh3YWl0ZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJFcnJldXIgbG9ycyBkZSBsJ2F1dGhlbnRpZmljYXRpb24gZHUgc29ja2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAjIGlmIGhlYWRlcnMgZXQgcGF5bG9hZCBwcmVzZW50LgogICAgICAgICAgICAgICAgICAgICMKICAgICAgICAgICAgICAgICAgICBpZiBtZXNzYWdlWydoZWFkZXInXSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggbWVzc2FnZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgeyJoZWFkZXIiOiBnbG91dGlscy5IZWFkZXJzLkJZRX06CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVtb3ZlX2NsaWVudCh3YWl0ZXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjQVVUSF9SRUdJU1RFUgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB7ImhlYWRlciI6IGdsb3V0aWxzLkhlYWRlcnMuQVVUSF9SRUdJU1RFUn06CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJ1c2VybmFtZSIgaW4gbWVzc2FnZVsncGF5bG9hZCddIGFuZCAicGFzc3dvcmQiIGluIG1lc3NhZ2VbJ3BheWxvYWQnXSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ1JlcG9uc2UgPSBzZWxmLl9jcmVhdGVfYWNjb3VudCh3YWl0ZXIsIG1lc3NhZ2VbJ3BheWxvYWQnXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvc29ja2V0LnNlbmRfbWVzZyh3YWl0ZXIsIGpzb24uZHVtcHMocmVnUmVwb25zZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIkVycmV1ciBsZSBtZXNzYWdlIG5lIGNvbnRpZW50IHBhcyBldC9vdSBwYXMgbGUgYm9uIGdsb3V0aWxzLnBheWxvYWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZW1vdmVfY2xpZW50KHdhaXRlcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICNBVVRIX0xPR0lOCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHsiaGVhZGVyIjogZ2xvdXRpbHMuSGVhZGVycy5BVVRIX0xPR0lOfToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoTG9nUmVwb25zZSA9IHNlbGYuX2xvZ2luKHdhaXRlciwgbWVzc2FnZVsncGF5bG9hZCddKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvc29ja2V0LnNlbmRfbWVzZyh3YWl0ZXIsIGpzb24uZHVtcHMoYXV0aExvZ1JlcG9uc2UpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBnbG9zb2NrZXQuR0xPU29ja2V0RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJFcnJldXIgbG9ycyBkZSBsJ2Vudm9pIGRlIGxhIGNvbmZpcm1hdGlvbiBkZSBjb25uZXh0aW9uIHBhciBsZSBzZXJ2ZXVyLiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICNBVVRIX0xPR09VVAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB7ImhlYWRlciI6IGdsb3V0aWxzLkhlYWRlcnMuQVVUSF9MT0dPVVR9OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2xvZ291dCh3YWl0ZXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICNTVEFUU19SRVFVRVNUCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHsiaGVhZGVyIjogZ2xvdXRpbHMuSGVhZGVycy5TVEFUU19SRVFVRVNUfToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbWFuZGVTdGF0cyA9IHNlbGYuX2dldF9zdGF0cyh3YWl0ZXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJFcnJldXIgbGEgZGVtYW5kZSBkZSBzdGF0aXN0aXF1ZS4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9zb2NrZXQuc2VuZF9tZXNnKHdhaXRlciwganNvbi5kdW1wcyhkZW1hbmRlU3RhdHMpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBnbG9zb2NrZXQuR0xPU29ja2V0RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJFcnJldXIgbG9ycyBkZSBsJ2Vudm9pIGQndW5lIGRlbWFuZGUgZGUgc3RhdGlzdGlxdWVzLiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3JlbW92ZV9jbGllbnQod2FpdGVyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgI0VNQUlMX1NFTkRJTkcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgeyJoZWFkZXIiOiBnbG91dGlscy5IZWFkZXJzLkVNQUlMX1NFTkRJTkd9OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb3NvY2tldC5zZW5kX21lc2cod2FpdGVyLCBqc29uLmR1bXBzKHNlbGYuX3NlbmRfZW1haWwobWVzc2FnZVsicGF5bG9hZCJdKSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHsiaGVhZGVyIjogZ2xvdXRpbHMuSGVhZGVycy5JTkJPWF9SRUFESU5HX1JFUVVFU1R9OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb3NvY2tldC5zZW5kX21lc2cod2FpdGVyLCBqc29uLmR1bXBzKHNlbGYuX2dldF9lbWFpbF9saXN0KHdhaXRlcikpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB7ImhlYWRlciI6IGdsb3V0aWxzLkhlYWRlcnMuSU5CT1hfUkVBRElOR19DSE9JQ0V9OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb3NvY2tldC5zZW5kX21lc2cod2FpdGVyLCBqc29uLmR1bXBzKHNlbGYuX2dldF9lbWFpbCh3YWl0ZXIsIG1lc3NhZ2VbJ3BheWxvYWQnXSkpKQoKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiRXJyb3IgbGUgbWVzc2FnZSBuZSBjb250aWVudCBwYXMgZGUgZ2xvdXRpbHMuSGVhZGVycyIpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3JlbW92ZV9jbGllbnQod2FpdGVyKQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKCmRlZiBfbWFpbigpIC0+IGludDoKICAgIHNlcnZlciA9IFNlcnZlcigpCiAgICB0cnk6CiAgICAgICAgc2VydmVyLnJ1bigpCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgc2VydmVyLmNsZWFudXAoKQogICAgcmV0dXJuIDAKCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgc3lzLmV4aXQoX21haW4oKSkK"}},"tp_number":4}